:root{
  --bg:#0f1724; --card:#0b1220; --accent:#7c5cff; --accent-2:#00d4ff; --muted:#9aa4b2; --bubble-me:#1f2937; --bubble-you:#111827;
  --glass: rgba(255,255,255,0.025);
  --success:#22c55e;
}
*{box-sizing:border-box}
html,body,#app{height:100%;}
body{
  margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,'Helvetica Neue',Arial;
  background:linear-gradient(180deg,#071126 0%, #07182a 100%);color:#e6eef8;
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
}
#app{display:grid;grid-template-columns:280px 1fr;gap:20px;padding:20px;align-items:stretch}

/* Sidebar */
.sidebar{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:18px;display:flex;flex-direction:column;gap:12px}
.brand{font-weight:700;font-size:1.25rem;color:var(--accent)}
.user-card{display:flex;gap:12px;align-items:center;padding:8px;border-radius:10px;background:var(--glass)}
.avatar{width:52px;height:52px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-weight:700;color:#fff}
.me-info{flex:1}
.me-phone{font-weight:600}
.me-status{font-size:0.85rem;color:var(--muted)}
.btn{border:none;padding:8px 10px;border-radius:8px;background:transparent;color:inherit;cursor:pointer}
.small{padding:6px 8px;font-size:0.85rem}
.btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#021;box-shadow:0 6px 18px rgba(124,92,255,0.12)}
.users-section{overflow:auto}
.users-list{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:8px}
.user-item{display:flex;gap:10px;align-items:center;padding:8px;border-radius:8px;background:transparent}
.user-item .avatar{width:36px;height:36px;font-size:0.95rem}
.theme-note{font-size:0.85rem;color:var(--muted);margin-top:auto}

/* Chat area */
.chat-area{display:flex;flex-direction:column;height:calc(100vh - 60px);background:rgba(255,255,255,0.02);border-radius:12px;overflow:hidden}
.chat-header{padding:16px 20px;border-bottom:1px solid rgba(255,255,255,0.02);display:flex;flex-direction:column}
.chat-title{font-weight:700}
.chat-subtitle{font-size:0.9rem;color:var(--muted)}
.messages{flex:1;padding:20px;overflow:auto;display:flex;flex-direction:column;gap:12px}
.msg{max-width:70%;padding:12px 14px;border-radius:14px;line-height:1.35;color:#e6eef8}
.msg.me{margin-left:auto;background:linear-gradient(180deg,var(--bubble-me),#0b1220);}
.msg.you{margin-right:auto;background:linear-gradient(180deg,var(--bubble-you),#071124);}
.msg .meta{font-size:0.75rem;color:var(--muted);margin-top:8px;display:flex;gap:8px;align-items:center}
.msg .sender{font-weight:700}

.composer{display:flex;gap:10px;padding:14px;border-top:1px solid rgba(255,255,255,0.02);align-items:center}
.msg-input{flex:1;padding:12px;border-radius:12px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:inherit}
.btn.emoji{padding:10px;background:transparent;font-size:1.1rem}

.attachments-preview{display:flex;gap:10px;padding:8px 14px;border-top:1px solid rgba(255,255,255,0.02);flex-wrap:wrap}
.attachment-thumb{display:inline-flex;flex-direction:column;align-items:center;gap:6px;background:rgba(255,255,255,0.02);padding:8px;border-radius:10px}
.attachment-thumb img{max-width:140px;max-height:100px;border-radius:8px;display:block}
.attachment-thumb video{max-width:240px;border-radius:8px}
.pending-attach{display:flex;align-items:center;gap:10px;padding:8px;background:rgba(255,255,255,0.02);border-radius:8px}
.pending-attach img{width:60px;height:40px;object-fit:cover;border-radius:6px}
.pending-attach .meta{max-width:160px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}
.btn.small.remove{background:rgba(255,50,50,0.08);color:#ff7b7b}
.recording{background:linear-gradient(90deg,#ff7b7a,#ffb678);color:#021}

/* Charts */
.charts-section{margin-top:10px}
.charts-list{display:flex;flex-direction:column;gap:8px;max-height:220px;overflow:auto}
.chart-card{display:flex;gap:8px;align-items:center;padding:8px;border-radius:8px;background:rgba(255,255,255,0.015)}
.chart-card canvas{width:160px;height:90px;border-radius:6px}
.chart-card .meta{flex:1}
.chart-card .meta .title{font-weight:700}
.chart-card .meta .owner{font-size:0.85rem;color:var(--muted)}
.chart-card .actions{display:flex;gap:6px;align-items:center}
.modal-card canvas{max-width:100%;height:auto}

/* Modal */
.modal{position:fixed;inset:0;background:linear-gradient(180deg,rgba(2,6,23,0.6), rgba(2,6,23,0.85));display:flex;align-items:center;justify-content:center}
.modal-card{background:linear-gradient(180deg,#071429,#081227);padding:20px;border-radius:12px;min-width:320px;max-width:420px}
.modal-card h2{margin:0 0 8px}
.modal-card p{margin:0 0 12px;color:var(--muted)}
.modal-card label{display:block;font-size:0.85rem;margin-top:8px;color:var(--muted)}
.modal-card input{width:100%;padding:10px;margin-top:6px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:inherit}
.modal-card select{width:100%;padding:10px;margin-top:6px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.03);color:inherit}
#countryCode{width:92px}
#verifyArea input{width:180px}
.small{font-size:0.85rem}
.muted{color:var(--muted)}

/* Responsive */
@media (max-width:800px){
  #app{grid-template-columns:1fr;}
  .sidebar{display:none}
  .chat-area{height:100vh;border-radius:0}
}

/* subtle scroll styling */
.messages::-webkit-scrollbar{width:10px}
.messages::-webkit-scrollbar-thumb{background:rgba(255,255,255,0.03);border-radius:8px}

/* subtle new-message flash */
body.flash{box-shadow:0 0 0 3px rgba(124,92,255,0.06) inset;}

/* tiny badges */
.badge{background:var(--accent);padding:2px 6px;border-radius:999px;color:#021;font-weight:700;font-size:0.8rem}
